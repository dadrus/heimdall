{{ $currentPage := . -}}
{{ $section := $currentPage.Section -}}

<div class="docs-search-button">
  <button type="button" class="btn btn-outline-secondary mb-3 d-none d-md-block w-100 text-start" data-bs-toggle="modal" data-bs-target="#docSearch"
          aria-controls="docSearch" aria-expanded="false" aria-label="Open search">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search me-2" viewBox="0 0 20 20">
      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
    </svg>
    <span>Quick search...</span>
  </button>
</div>
<ul class="nav flex-column">
  {{ range (index .Site.Menus $section) -}}
  <li class="nav-item">
    {{ $active := in $currentPage.RelPermalink .URL }}
    {{ if .HasChildren -}}
    <strong class="d-md-block fs-6">{{ .Title }}</strong>
    <ul class="nav flex-column mb-2">
      {{ range .Children -}}
      <li class="nav-item">
        {{ $active := in $currentPage.RelPermalink .URL }}
        <a class="nav-link {{ if $active }} link-primary {{ else }} link-secondary {{ end }}" href="{{ .URL }}">{{ .Title }}</a>
      </li>
      {{ end }}
    </ul>
    {{- else -}}
    <a class="nav-link {{ if $active }} link-primary {{ else }} link-secondary {{ end }}"  href="{{ .URL }}">{{- .Title -}}</a>
    {{- end -}}
  </li>
  {{ end }}
</ul>
