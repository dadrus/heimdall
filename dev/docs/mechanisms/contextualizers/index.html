<!doctype html><html lang=en><head><title>Contextualizers</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An open source Identity Aware Proxy and an Access Control Decision service for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap px-0" aria-label="Main navigation"><button class="btn btn-outline-dark d-lg-none navbar-toggler border-0 shadow-none ps-3" type=button data-bs-toggle=offcanvas data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg width="36" height="36" fill="currentcolor" class="bi bi-list" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 12a.5.5.0 01.5-.5h10a.5.5.0 010 1H3a.5.5.0 01-.5-.5m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 8m0-4a.5.5.0 01.5-.5h10a.5.5.0 010 1H3A.5.5.0 012.5 4"/></svg></button><nav class="offcanvas offcanvas-start d-md-none text-bg-light" tabindex=-1 id=docsMenuContent aria-labelledby=docsMenuContentLabel><div class=offcanvas-header><h5 class=offcanvas-title id=docsMenuContentLabel>Browse docs</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label="Close docs menu"></button></div><div class="offcanvas-body docs-sidebar"><div class=docs-search-button><button type=button class="btn btn-outline-secondary mb-3 d-none d-md-block w-100 text-start" data-bs-toggle=modal data-bs-target=#docSearch aria-controls=docSearch aria-expanded=false aria-label="Open search">
<svg width="20" height="20" fill="currentcolor" class="bi bi-search me-2" viewBox="0 0 20 20"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg>
<span>Quick search...</span></button></div><nav id=SideBarToc><ul><li><span>Getting Started</span><ul><li><a href=../../../docs/getting_started/discover_heimdall/>Discover heimdall</a></li><li><a href=../../../docs/getting_started/installation/>Install heimdall</a></li><li><a href=../../../docs/getting_started/protect_an_app/>Protect an Application</a></li></ul></li><li><span>Concepts</span><ul><li><a href=../../../docs/concepts/pipelines/>Pipelines</a></li><li><a href=../../../docs/concepts/mechanisms/>Mechanisms</a></li><li><a href=../../../docs/concepts/rules/>Rules</a></li><li><a href=../../../docs/concepts/provider/>Rule Provider</a></li><li><a href=../../../docs/concepts/operating_modes/>Operating Modes</a></li></ul></li><li><span>Operations</span><ul><li><a href=../../../docs/operations/configuration/>Configuration</a></li><li><a href=../../../docs/operations/cli/>CLI</a></li><li><a href=../../../docs/operations/observability/>Observability</a></li><li><a href=../../../docs/operations/cache/>Caching</a></li><li><a href=../../../docs/operations/security/>Security</a></li></ul></li><li><span>Services</span><ul><li><a href=../../../docs/services/main/>Main Service</a></li><li><a href=../../../docs/services/management/>Management Service</a></li></ul></li><li><span>Mechanisms</span><ul><li><a href=../../../docs/mechanisms/catalogue/>Catalogue</a></li><li><a href=../../../docs/mechanisms/evaluation_objects/>Objects, Templating & Co</a></li><li><a href=../../../docs/mechanisms/authenticators/>Authenticators</a></li><li><a href=../../../docs/mechanisms/authorizers/>Authorizers</a></li><li><a class=active href=../../../docs/mechanisms/contextualizers/>Contextualizers</a></li><li><a href=../../../docs/mechanisms/finalizers/>Finalizers</a></li><li><a href=../../../docs/mechanisms/error_handlers/>Error Handlers</a></li></ul></li><li><span>Rules</span><ul><li><a href=../../../docs/rules/regular_rule/>Regular Rule</a></li><li><a href=../../../docs/rules/default_rule/>Default Rule</a></li><li><a href=../../../docs/rules/rule_sets/>Rule Sets</a></li><li><a href=../../../docs/rules/providers/>Rule Providers</a></li></ul></li><li><span>Configuration Reference</span><ul><li><a href=../../../docs/configuration/types/>Type Definitions</a></li><li><a href=../../../docs/configuration/reference/>Reference</a></li></ul></li></ul></nav></div></nav><div class="d-flex align-items-center px-4"><a class="navbar-brand navbar-brand-highlight text-white me-0" href=../../../ style=font-weight:500;font-size:1.5rem>Heimdall</a><ul class="navbar-nav d-none d-md-flex ms-3"><li class=nav-item><a class='nav-link text-white' href=../../../docs/getting_started/discover_heimdall>Docs</a></li><li class=nav-item><a class='nav-link text-white' href=../../../guides/>Guides</a></li><li class=nav-item><a class='nav-link text-white' href=../../../openapi/>API</a></li></ul></div><div class=d-flex><button type=button class="btn btn-outline-dark navbar-toggler border-0 shadow-none" data-bs-toggle=modal data-bs-target=#docSearch aria-controls=docSearch aria-expanded=false aria-label="Open search">
<span class="bi bi-search"></span>
</button>
<button class="btn btn-outline-dark navbar-toggler border-0 shadow-none pe-3" type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu"><svg width="24" height="24" fill="currentcolor" class="bi bi-three-dots" viewBox="0 0 16 16"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"/></svg></button><div class="offcanvas offcanvas-end text-bg-dark" tabindex=-1 id=mainMenuContent aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h5 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h5><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column d-md-none d-lg-none d-xl-none"><li class=nav-item><a class='nav-link text-white' href=../../../docs/getting_started/discover_heimdall>Docs</a></li><li class=nav-item><a class='nav-link text-white' href=../../../guides/>Guides</a></li><li class=nav-item><a class='nav-link text-white' href=../../../openapi/>API</a></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto"><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/mechanisms/contextualizers/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1 pe-4"><a class="nav-link text-white" style=align-self:center href=https://github.com/dadrus/heimdall><svg role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
<small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></div></nav></header><div class=modal id=docSearch tabindex=-1 aria-labelledby=docSearchLabel aria-hidden=true><doc-search class="col-auto me-auto mw-75" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><div class="modal-dialog modal-lg modal-dialog-scrollable"><div class=modal-content><div class="modal-header p-2"><div class=input-group><div class="input-group-text bg-body border-0 fs-4"><svg width="16" height="16" fill="currentcolor" class="bi bi-search text-secondary my-0" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg></div><input id=search-input class="form-control search-bar border-0" type=search placeholder="Search documentation " aria-label="Search docs..." autocomplete=off autofocus><div class="input-group-text bg-body border-0"><a class="btn input-group-text text-muted border p-1 bg-light-subtle fs-7 fw-bold font-monospace" data-bs-dismiss=modal aria-label=Close>ESC</a></div></div></div><div class=modal-body><div class=search-results><p class="text-center mt-5">No recent searches</p></div></div><div class=modal-footer></div></div></div></doc-search></div><div class="container-xxl docs-layout px-4"><aside class="d-none pe-3 docs-sidebar"><div class=docs-search-button><button type=button class="btn btn-outline-secondary mb-3 d-none d-md-block w-100 text-start" data-bs-toggle=modal data-bs-target=#docSearch aria-controls=docSearch aria-expanded=false aria-label="Open search">
<svg width="20" height="20" fill="currentcolor" class="bi bi-search me-2" viewBox="0 0 20 20"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1 1 0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"/></svg>
<span>Quick search...</span></button></div><nav id=SideBarToc><ul><li><span>Getting Started</span><ul><li><a href=../../../docs/getting_started/discover_heimdall/>Discover heimdall</a></li><li><a href=../../../docs/getting_started/installation/>Install heimdall</a></li><li><a href=../../../docs/getting_started/protect_an_app/>Protect an Application</a></li></ul></li><li><span>Concepts</span><ul><li><a href=../../../docs/concepts/pipelines/>Pipelines</a></li><li><a href=../../../docs/concepts/mechanisms/>Mechanisms</a></li><li><a href=../../../docs/concepts/rules/>Rules</a></li><li><a href=../../../docs/concepts/provider/>Rule Provider</a></li><li><a href=../../../docs/concepts/operating_modes/>Operating Modes</a></li></ul></li><li><span>Operations</span><ul><li><a href=../../../docs/operations/configuration/>Configuration</a></li><li><a href=../../../docs/operations/cli/>CLI</a></li><li><a href=../../../docs/operations/observability/>Observability</a></li><li><a href=../../../docs/operations/cache/>Caching</a></li><li><a href=../../../docs/operations/security/>Security</a></li></ul></li><li><span>Services</span><ul><li><a href=../../../docs/services/main/>Main Service</a></li><li><a href=../../../docs/services/management/>Management Service</a></li></ul></li><li><span>Mechanisms</span><ul><li><a href=../../../docs/mechanisms/catalogue/>Catalogue</a></li><li><a href=../../../docs/mechanisms/evaluation_objects/>Objects, Templating & Co</a></li><li><a href=../../../docs/mechanisms/authenticators/>Authenticators</a></li><li><a href=../../../docs/mechanisms/authorizers/>Authorizers</a></li><li><a class=active href=../../../docs/mechanisms/contextualizers/>Contextualizers</a></li><li><a href=../../../docs/mechanisms/finalizers/>Finalizers</a></li><li><a href=../../../docs/mechanisms/error_handlers/>Error Handlers</a></li></ul></li><li><span>Rules</span><ul><li><a href=../../../docs/rules/regular_rule/>Regular Rule</a></li><li><a href=../../../docs/rules/default_rule/>Default Rule</a></li><li><a href=../../../docs/rules/rule_sets/>Rule Sets</a></li><li><a href=../../../docs/rules/providers/>Rule Providers</a></li></ul></li><li><span>Configuration Reference</span><ul><li><a href=../../../docs/configuration/types/>Type Definitions</a></li><li><a href=../../../docs/configuration/reference/>Reference</a></li></ul></li></ul></nav></aside><main class=docs-main><div class="d-md-none docs-location bg-body"><nav style="--bs-breadcrumb-divider:'>'" aria-label=breadcrumb><ol class="breadcrumb mb-0"><li class="breadcrumb-item fw-bold">Mechanisms</li><li class="breadcrumb-item active" aria-current=page>Contextualizers</li></ol></nav></div><div class="docs-intro pt-3 pe-3"><h1>Contextualizers</h1><p>Contextualizers allow you enriching the information about the request and the authenticated subject. This page describes the available contextualizer types in detail.</p></div><aside class="text-muted docs-toc"><strong class="d-md-block h6 pb-2 my-2 ms-2 border-bottom d-none d-md-none d-lg-block">On this page</strong><div id=page-content-toc class="mt-1 mb-3 text-muted d-none d-md-none d-lg-block docs-toc-content"><nav id=TableOfContents><ul><li><a href=#_generic>Generic</a></li><li><a href=#_map>Map</a></li></ul></nav></div><button class="btn btn-outline-secondary text-decoration-none d-lg-none collapsed" type=button data-bs-toggle=collapse data-bs-target=#page-content-toc-collapsible aria-expanded=false aria-controls=page-content-toc-collapsible>
On this page<svg width="16" height="16" fill="currentcolor" class="bi bi-chevron-expand" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M3.646 9.146a.5.5.0 01.708.0L8 12.793l3.646-3.647a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 010-.708m0-2.292a.5.5.0 00.708.0L8 3.207l3.646 3.647a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 000 .708"/></svg></button><div id=page-content-toc-collapsible class="mt-1 mb-3 text-muted d-lg-none collapse docs-toc-content"><div class="card card-body"><nav id=TableOfContents><ul><li><a href=#_generic>Generic</a></li><li><a href=#_map>Map</a></li></ul></nav></div></div></aside><div class="docs-content pe-3"><div data-bs-spy=scroll data-bs-target=#page-content-toc class=mt-3><linkable-headline-area><div class=paragraph><p>Some of the contextualizers may support or require additional configuration. The corresponding properties are annotated with <code>mandatory</code>, respectively <code>optional</code> to denote configuration requirement, as well as with <code>overridable</code>, <code>not overridable</code> and <code>partially overridable</code> to indicate whether the property can be overridden in a rule pipeline.</p></div><div class=sect1><h2 id=_generic>Generic</h2><div class=sectionbody><div class=paragraph><p>This mechanism allows you to communicate to any API you want to fetch further information about the subject. Typical scenario is getting specific attributes for later authorization purposes which are not known to the authentication system and thus were not made available in <a href=../../../docs/mechanisms/evaluation_objects/#_subject><code>Subject’s</code></a> <code>Attributes</code> property. If the API responses with a 2xx HTTP response code, the payload is made available in the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a> object, otherwise, if not overridden, an error is thrown and the execution of the authentication & authorization pipeline stops. To avoid overwriting of existing key value pairs, this object is however not available on the top level, but under a key named by the <code>id</code> of the contextualizer (See also the example below). If the <code>Content-Type</code> of the response is either ending with <code>json</code> or is <code>application/x-www-form-urlencoded</code>, the payload is decoded and made available as map, otherwise it is treated as string, but, as written above, is made available as well.</p></div><div class=paragraph><p>To enable the usage of this contextualizer, you have to set the <code>type</code> property to <code>generic</code>.</p></div><div class=paragraph><p>Configuration using the <code>config</code> property is mandatory. Following properties are available:</p></div><div class=ulist><ul><li><p><strong><code>endpoint</code></strong>: <em><a href=../../../docs/configuration/types/#_endpoint>Endpoint</a></em> (mandatory, not overridable)</p><div class=paragraph><p>The API of the service providing additional attributes about the authenticated user. At least the <code>url</code> must be configured. This mechanism allows templating of the url and makes the <a href=../../../docs/mechanisms/evaluation_objects/#_subject><code>Subject</code></a>, the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a> object, as well as the <a href=../../../docs/mechanisms/evaluation_objects/#_values><code>Values</code></a> (see also below) objects available to it. By default, this contextualizer will use HTTP <code>POST</code> to send the rendered payload to this endpoint. You can override this behavior by configuring <code>method</code> as well. Depending on the API requirements of the system, this contextualizer should communicate to, you might need to configure further properties, like headers, etc.</p></div></li><li><p><strong><code>forward_headers</code></strong>: <em>string array</em> (optional, overridable)</p><div class=paragraph><p>If the API requires any headers from the request to heimdall, you can forward these unchanged by making use of this property</p></div></li><li><p><strong><code>forward_cookies</code></strong>: <em>string array</em> (optional, overridable)</p><div class=paragraph><p>If the API requires any cookies from the request to heimdall, you can forward these unchanged by making use of this property.</p></div></li><li><p><strong><code>payload</code></strong>: <em>string</em> (optional, overridable)</p><div class=paragraph><p>Your <a href=../../../docs/mechanisms/evaluation_objects/#_templating>template</a> with definitions required to communicate to the endpoint. The template can make use of <a href=../../../docs/mechanisms/evaluation_objects/#_values><code>Values</code></a>, <a href=../../../docs/mechanisms/evaluation_objects/#_subject><code>Subject</code></a>, the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a>, and <a href=../../../docs/mechanisms/evaluation_objects/#_request><code>Request</code></a> objects.</p></div></li><li><p><strong><code>cache_ttl</code></strong>: <em><a href=../../../docs/configuration/types/#_duration>Duration</a></em> (optional, overridable)</p><div class=paragraph><p>Allows caching of the API responses. Defaults to 10 seconds. The cache key is calculated from the entire configuration of the contextualizer instance and the available information about the current subject.</p></div></li><li><p><strong><code>continue_pipeline_on_error</code></strong>: <em>boolean</em> (optional, overridable)</p><div class=paragraph><p>If set to <code>true</code>, allows the pipeline to continue with the execution of the next mechanisms. So the error, if thrown, is ignored. Defaults to <code>false</code>, which means the execution of the authentication & authorization pipeline is stopped and the execution of the error pipeline is started.</p></div></li><li><p><strong><code>values</code></strong> <em>map of strings</em> (optional, overridable)</p><div class=paragraph><p>A key value map, which is made accessible to the template rendering engine as <a href=../../../docs/mechanisms/evaluation_objects/#_values><code>Values</code></a> object to render parts of the URL and/or the payload. The actual values in that map can be templated as well with access to the <a href=../../../docs/mechanisms/evaluation_objects/#_subject><code>Subject</code></a>, the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a> and <a href=../../../docs/mechanisms/evaluation_objects/#_request><code>Request</code></a> objects.</p></div></li></ul></div><div class=exampleblock><div class=title>Example 1. Contextualizer configuration without payload</div><div class=content><div class=paragraph><p>In this example the contextualizer is configured to call an endpoint using the HTTP <code>GET</code> method with the subject id being part of the url path. As the endpoint requires the <code>X-My-Session-Cookie</code> cookie for subject authentication purposes, <code>forward_cookies</code> is used to achieve this.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=na>id</span><span class=pi>:</span> <span class=s>foo</span>
<span class=na>type</span><span class=pi>:</span> <span class=s>generic</span>
<span class=na>config</span><span class=pi>:</span>
  <span class=na>endpoint</span><span class=pi>:</span>
    <span class=na>url</span><span class=pi>:</span> <span class=s>https://some-other.service/users/{{.Subject.ID}}</span>
    <span class=na>method</span><span class=pi>:</span> <span class=s>GET</span>
  <span class=na>forward_cookies</span><span class=pi>:</span>
    <span class=pi>-</span> <span class=s>X-My-Session-Cookie</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 2. Contextualizer configuration with payload</div><div class=content><div class=paragraph><p>In this example the contextualizer is configured to call an endpoint using the HTTP <code>POST</code> and send some data.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=na>id</span><span class=pi>:</span> <span class=s>foo</span>
<span class=na>type</span><span class=pi>:</span> <span class=s>generic</span>
<span class=na>config</span><span class=pi>:</span>
  <span class=na>endpoint</span><span class=pi>:</span>
    <span class=na>url</span><span class=pi>:</span> <span class=s>https://some-other.service/users</span>
    <span class=na>method</span><span class=pi>:</span> <span class=s>POST</span>
  <span class=na>payload</span><span class=pi>:</span> <span class=pi>|</span>
    <span class=s>{</span>
      <span class=s>&#34;user_id&#34;: {{ quote .Values.user_id }}</span>
      <span class=s>&#34;whatever&#34;: {{ quote .Outputs.whatever }}</span>
    <span class=s>}</span></code></pre></div></div><div class=paragraph><p>Since the <code>values</code> property is not defined but used in the payload, it must be specified in a rule making use of this contextualizer, e.g. in the following way:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=pi>-</span> <span class=na>id</span><span class=pi>:</span> <span class=s>rule1</span>
  <span class=c1># other rule properties</span>
  <span class=na>execute</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=c1># other mechanisms</span>
  <span class=pi>-</span> <span class=na>contextualizer</span><span class=pi>:</span> <span class=s>foo</span>
    <span class=na>config</span><span class=pi>:</span> <span class=c1># overriding with rule specifics</span>
      <span class=na>values</span><span class=pi>:</span>
        <span class=na>user_id</span><span class=pi>:</span> <span class=s2>&#34;</span><span class=s>{{</span><span class=nv> </span><span class=s>.Subject.ID</span><span class=nv> </span><span class=s>}}&#34;</span>
  <span class=pi>-</span> <span class=c1># other mechanisms</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=_map>Map</h2><div class=sectionbody><div class=paragraph><p>This mechanism allows you to define (templated) variables which can be used in contextualizers/authorizers/finalizers afterwards to extract common logic out of Rulesets.</p></div><div class=paragraph><p>To enable the usage of this contextualizer, you have to set the <code>type</code> property to <code>map</code>.</p></div><div class=paragraph><p>Configuration using the <code>config</code> property is mandatory. Following properties are available:</p></div><div class=ulist><ul><li><p><strong><code>items</code></strong>: <em>map of strings</em> (mandatory, not overridable)</p><div class=paragraph><p>Every entry in the items map is a map of templates. Every key will be present in the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a> object.</p></div></li><li><p><strong><code>values</code></strong> <em>map of strings</em> (optional, overridable)</p><div class=paragraph><p>A key value map, which is made accessible to the template rendering engine as <a href=../../../docs/mechanisms/evaluation_objects/#_values><code>Values</code></a> object to render parts of the URL and/or the payload. The actual values in that map can be templated as well with access to the <a href=../../../docs/mechanisms/evaluation_objects/#_subject><code>Subject</code></a>, the <a href=../../../docs/mechanisms/evaluation_objects/#_outputs><code>Outputs</code></a> and <a href=../../../docs/mechanisms/evaluation_objects/#_request><code>Request</code></a> objects.</p></div></li></ul></div><div class=exampleblock><div class=title>Example 3. Simple contextualizer configuration</div><div class=content><div class=paragraph><p>In this example the contextualizer is configured to template a single variable named 'foo'.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=na>id</span><span class=pi>:</span> <span class=s>foo</span>
<span class=na>type</span><span class=pi>:</span> <span class=s>map</span>
<span class=na>config</span><span class=pi>:</span>
  <span class=na>items</span><span class=pi>:</span>
    <span class=na>foo</span><span class=pi>:</span> <span class=s2>&#34;</span><span class=s>https://some-other.service/users/{{.Subject.ID}}&#34;</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 4. Contextualizer configuration with values</div><div class=content><div class=paragraph><p>In this example the contextualizer is configured to template a single variable named foo, but contains a reference to local values.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=na>id</span><span class=pi>:</span> <span class=s>foo</span>
<span class=na>type</span><span class=pi>:</span> <span class=s>map</span>
<span class=na>config</span><span class=pi>:</span>
  <span class=na>items</span><span class=pi>:</span>
    <span class=na>foo</span><span class=pi>:</span> <span class=s2>&#34;</span><span class=s>https://some-other.service/users/{{.Values.user_id}}&#34;</span></code></pre></div></div><div class=paragraph><p>Since the <code>values</code> property is not defined but used in items, it must be specified in a rule making use of this contextualizer, e.g. in the following way:</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=yaml><span class=pi>-</span> <span class=na>id</span><span class=pi>:</span> <span class=s>rule1</span>
  <span class=c1># other rule properties</span>
  <span class=na>execute</span><span class=pi>:</span>
  <span class=pi>-</span> <span class=c1># other mechanisms</span>
  <span class=pi>-</span> <span class=na>contextualizer</span><span class=pi>:</span> <span class=s>foo</span>
    <span class=na>config</span><span class=pi>:</span> <span class=c1># overriding with rule specifics</span>
      <span class=na>values</span><span class=pi>:</span>
        <span class=na>user_id</span><span class=pi>:</span> <span class=s2>&#34;</span><span class=s>{{</span><span class=nv> </span><span class=s>.Subject.ID</span><span class=nv> </span><span class=s>}}&#34;</span>
  <span class=pi>-</span> <span class=c1># other mechanisms</span></code></pre></div></div></div></div></div></div></linkable-headline-area></div><p class="text-end fst-italic fs-7 pb-3">Last updated on <span class=fw-bold>Jul 6, 2025</span></p><hr><div class="d-flex justify-content-between py-3"><a href=../../../docs/mechanisms/authorizers/ class="fs-6 fw-bold text-dark link-secondary link-underline-opacity-0"><svg width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>
Authorizers
</a><a class="ms-auto fs-6 fw-bold text-dark link-secondary link-underline-opacity-0" href=../../../docs/mechanisms/finalizers/>Finalizers<svg width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></a></div></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3 mt-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022-2024 © Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../>Home</a></li><li class=mb-2><a href=../../../docs/getting_started/discover_heimdall>Docs</a></li><li class=mb-2><a href=../../../guides/>Guides</a></li><li class=mb-2><a href=../../../openapi/>API</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../guides/proxies/>API Gateways & Proxies</a></li><li class=mb-2><a href=../../../guides/authz/>Authorization Services</a></li><li class=mb-2><a href=../../../guides/authn/>Authentication Protocols & Services</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://discord.gg/qQgg8xKuyb>Discord</a></li></ul></div></div></div></footer><script src=../../../js/main.js defer></script></body></html>