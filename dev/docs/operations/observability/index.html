<!doctype html><html lang=en><head><title>Observability</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An open source Identity Aware Proxy and an Access Control Decision service for cloud native applications"><meta name=dc.relation content="https://dadrus.github.io/"><meta name=theme-color content="#1A94D2"><link rel=stylesheet href=../../../css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=../../../favicon.ico></head><body><header class="navbar navbar-expand-md navbar-dark bg-dark sticky-top"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand text-white" href=../../../ style=font-weight:500;font-size:1.5rem>Heimdall</a>
<button class=navbar-toggler type=button data-bs-toggle=offcanvas data-bs-target=#mainMenuContent aria-controls=mainMenuContent aria-expanded=false aria-label="Open main menu">
<span class=navbar-toggler-icon></span></button><div class="offcanvas offcanvas-end bg-dark" tabindex=-1 id=mainMenuContent data-bs-scroll=true aria-labelledby=mainMenuContentLabel><div class=offcanvas-header><h5 class="offcanvas-title text-white" id=mainMenuContentLabel>Heimdall</h5><button type=button class="btn-close btn-close-white" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class=offcanvas-body><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../docs/welcome style=align-self:center>Docs</a></li><li class=nav-item style=display:flex><a class='nav-link text-white' href=../../../openapi/ style=align-self:center>API</a></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Get Started-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Get Started</a><ul class="dropdown-menu bg-dark" aria-labelledby="Get Started-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../docs/getting_started/concepts/>Concepts</a></li><li><a class='dropdown-item text-white' href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li><a class='dropdown-item text-white' href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li></ul></li><li class="nav-item dropdown" style=display:flex><a class='nav-link dropdown-toggle text-white' href=# id="Integration Guides-navbarDropdown" role=button data-bs-toggle=dropdown aria-expanded=false style=align-self:center>Integration Guides</a><ul class="dropdown-menu bg-dark" aria-labelledby="Integration Guides-navbarDropdown"><li><a class='dropdown-item text-white' href=../../../docs/guides/contour/>Contour Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/envoy/>Envoy Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/haproxy/>HAProxy Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/opa/>Integration with OPA</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/nginx/>NGINX Integration</a></li><li><a class='dropdown-item text-white' href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li></ul></li></ul><hr class="text-white-50 d-md-none"><ul class="navbar-nav flex-column ms-auto" style=align-self:center><doc-version-select class="nav-item dropdown" version-file=/heimdall/data.json current-version=dev current-page=/docs/operations/observability/><button class="btn btn-dark dropdown-toggle me-4" data-bs-toggle=dropdown aria-expanded=false>
dev</button></doc-version-select></ul><ul class="navbar-nav flex-column"><li class="nav-item mb-1" style=display:flex><a class="nav-link text-white" style=align-self:center href=https://github.com/dadrus/heimdall><svg xmlns="http://www.w3.org/2000/svg" role="img" width="20" height="20" fill="currentcolor" class="bi bi-github text-white" viewBox="0 0 16 16"><title>GitHub</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><nav class="navbar navbar-expand-lg bg-light" aria-label="Docs menu"><div class=container-xxl><div class="row container-fluid"><doc-search class="col-auto me-auto" index-file=/heimdall/dev/index.json path-prefix=/heimdall/dev><form id=docs-search tabindex=1 class="doks-search position-relative me-auto"><input id=search class="form-control search-bar" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=search-suggestions class="shadow bg-white rounded collapse search-results"></div></form></doc-search><button class="col-auto navbar-toggler" type=button data-bs-toggle=collapse data-bs-target=#docsMenuContent aria-controls=docsMenuContent aria-expanded=false aria-label="Open docs menu"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-arrow-down-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 15a.5.5.0 00.5-.5V2.707l3.146 3.147a.5.5.0 00.708-.708l-4-4a.5.5.0 00-.708.0l-4 4a.5.5.0 10.708.708L11 2.707V14.5a.5.5.0 00.5.5zm-7-14a.5.5.0 01.5.5v11.793l3.146-3.147a.5.5.0 01.708.708l-4 4a.5.5.0 01-.708.0l-4-4a.5.5.0 01.708-.708L4 13.293V1.5a.5.5.0 01.5-.5z"/></svg></button></div><div class="row d-md-none"><div class="col-2 collapse navbar-collapse" id=docsMenuContent><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=true>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/haproxy/>HAProxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=false>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class=collapse><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/finalizers/>Finalizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></div></div></div></nav><div class="container-xxl d-xxl-flex"><aside class="d-none d-md-block pe-4 pt-4 flex-xxl-shrink-0"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/welcome/>Welcome</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 aria-expanded=false>
Getting Started</button><div id=section-010b85ad56b34c34c7c2a3b2436c740e30428ed5 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/getting_started/concepts/>Concepts</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/decision_service_quickstart/>Decision Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/proxy_service_quickstart/>Proxy Service Quickstart</a></li><li class=nav-item><a class=nav-link href=../../../docs/getting_started/configuration_introduction/>Configuration Introduction</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a aria-expanded=true>
Operations</button><div id=section-a1fdaa6b2a846c8fcf18d414bf8c61db610eda6a class="collapse show"><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/operations/install/>Install</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/cli/>CLI</a></li><li class=nav-item><a class="nav-link fw-bold" href=../../../docs/operations/observability/>Observability</a></li><li class=nav-item><a class=nav-link href=../../../docs/operations/security/>Security</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-63bf47d7b1e91548862e3da277e46e20a4b75401 aria-expanded=false>
Integration Guides</button><div id=section-63bf47d7b1e91548862e3da277e46e20a4b75401 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/guides/contour/>Contour Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/emissary/>Emissary Ingress Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/envoy/>Envoy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/haproxy/>HAProxy Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/opa/>Integration with OPA</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/nginx/>NGINX Integration</a></li><li class=nav-item><a class=nav-link href=../../../docs/guides/traefik/>Traefik Proxy Integration</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 aria-expanded=false>
Configuration</button><div id=section-754164850f38c1ecdaf6b8ed894cb192bc36c5f4 class=collapse><ul class="nav flex-column"><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-5cbd584046863bc7b753e57e8681a98a87f36f0f aria-expanded=false>
Services</button><div id=section-5cbd584046863bc7b753e57e8681a98a87f36f0f class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/decision/>Decision</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/proxy/>Proxy</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/services/management/>Management</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-e2397377af6d698b0fb66f53c47349a85bd2cb00 aria-expanded=false>
Observability</button><div id=section-e2397377af6d698b0fb66f53c47349a85bd2cb00 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/logging/>Logging</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/metrics/>Metrics</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/tracing/>Tracing</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/observability/profiling/>Runtime Profiling</a></li></ul></div></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a aria-expanded=false>
Rules</button><div id=section-bb11a8e3f8712e36e7cd9d1c615a4e3dbb03336a class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/overview/>Rules Overview</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 aria-expanded=false>
Pipeline Mechanisms</button><div id=section-83ebcaaac1209f17a08fa17b9b1837aca7b222f7 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/overview/>Mechanisms Overview</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authenticators/>Authenticators</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/authorizers/>Authorizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/contextualizers/>Contextualizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/finalizers/>Finalizers</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/pipeline_mechanisms/error_handlers/>Error Handlers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/configuration/>Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/default/>Default Rule</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/rules/providers/>Rule Providers</a></li></ul></div></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/cryptographic_material/>Cryptographic Material</a></li><li class=nav-item><button class="btn btn-toggle align-items-center rounded collapsed fw-bold border-0" data-bs-toggle=collapse data-bs-target=#section-db1c784524e1b54011a95823026161f7c8517fe0 aria-expanded=false>
Reference</button><div id=section-db1c784524e1b54011a95823026161f7c8517fe0 class=collapse><ul class="nav flex-column"><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/types/>Configuration Types</a></li><li class=nav-item><a class=nav-link href=../../../docs/configuration/reference/reference/>Static Configuration Reference</a></li></ul></div></li></ul></div></li></ul></aside><main class="px-3 pt-4 flex-xxl-grow-0"><h1>Observability</h1><div><linkable-headline-area><div class=paragraph><p>Hemdall implements different observability mechanisms to support easier operation and integration in different APM products. The following sections provide insights about what can be expected.</p></div><div class=sect1><h2 id=_logging_in_heimdall>Logging in Heimdall</h2><div class=sectionbody><div class=paragraph><p>Heimdallâ€™s implementation uses <a href=https://github.com/rs/zerolog>zerolog</a> - Zero Allocation JSON Logger, which can however also log in plain text. All emitted log statements include information related to distributed tracing (if tracing is enabled) so that not only log statements can be correlated to traces, but also all log statements belonging to single request/transaction can be correlated as well.</p></div><div class=paragraph><p>Available Logging configuration options are described in <a href=../../../docs/configuration/observability/logging/>Logging Configuration</a>.</p></div><div class=sect2><h3 id=_regular_log_events>Regular Log Events</h3><div class=paragraph><p>If you configure heimdall to log in <code>text</code> format, you can expect output similar to the one shown below:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=log>2022-08-03T12:51:48+02:00 INF Opentelemetry tracing initialized.
2022-08-03T12:51:48+02:00 INF Instantiating in memory cache
2022-08-03T12:51:48+02:00 DBG Creating rule set event queue.
2022-08-03T12:51:48+02:00 INF Loading pipeline definitions
2022-08-03T12:51:48+02:00 DBG Loading definitions for authenticators
2022-08-03T12:51:48+02:00 DBG Loading pipeline definition id=anonymous_authenticator type=anonymous
...
2022-08-03T12:51:52+02:00 DBG Decision endpoint called
2022-08-03T12:51:52+02:00 DBG Executing default rule
2022-08-03T12:51:52+02:00 DBG Authenticating using anonymous authenticator
2022-08-03T12:51:52+02:00 DBG Finalizing using JWT finalizer
2022-08-03T12:51:52+02:00 DBG Generating new JWT
2022-08-03T12:51:52+02:00 DBG Finalizing request</code></pre></div></div><div class="admonitionblock warning"><table><tbody><tr><td class=icon><i class="fa icon-warning" title=Warning></i></td><td class=content>Usage of this format is not recommended for production deployments as it requires more computational resources and is hence slow.</td></tr></tbody></table></div><div class=paragraph><p>Otherwise, if you configure it to use <code>gelf</code> (see <a href=https://docs.graylog.org/v1/docs/gelf>GELF</a> for format details) format, the output will look as follows:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=json><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;INFO&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>6</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Opentracing tracer initialized.&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;INFO&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>6</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Instantiating in memory cache&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Creating rule set event queue.&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;INFO&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>6</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Loading pipeline definitions&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Loading definitions for authenticators&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;anonymous_authenticator&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;type&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;anonymous&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523288</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Loading pipeline definition&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>

</span><span style=color:#960050>...</span><span style=color:#fff;background-color:#272822>

</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Decision endpoint called&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Executing default rule&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Authenticating using anonymous authenticator&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Finalizing using JWT finalizer&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Generating new JWT&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>
</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;DEBUG&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>7</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;Finalizing request&#34;</span><span style=color:#fff;background-color:#272822>}</span></code></pre></div></div><div class=paragraph><p>Each log statement does also include the following fields in both log formats for incoming requests if tracing is enabled:</p></div><div class=ulist><ul><li><p><code>_trace_id</code> - The trace id as defined by OpenTelemetry.</p></li><li><p><code>_span_id</code> - The span id as defined by OpenTelemetry of the current transaction.</p></li><li><p><code>_parent_id</code> - The span id of the callee, which started the given transaction. Only present if the callee set the corresponding tracing header.</p></li></ul></div></div><div class=sect2><h3 id=_access_log_events>Access Log Events</h3><div class=paragraph><p>In addition to regular logs, heimdall emits access logs. These events are always emitted regardless the configured log level and the log level of these events in the log output is always <code>INFO</code>.</p></div><div class=paragraph><p>Each request to any of heimdallâ€™s endpoints will result in two access events:</p></div><div class=ulist><ul><li><p>event describing the start of the transaction, and an</p></li><li><p>event describing the finalization of the transaction.</p></li></ul></div><div class=paragraph><p>Following are the fields, which are always set for both events:</p></div><div class=ulist><ul><li><p><code>_tx_start</code> - Timestamp in Unix epoch format, when the transaction started.</p></li><li><p><code>_client_ip</code> - The IP of the client of the request.</p></li></ul></div><div class=paragraph><p>If the event has been emitted for an HTTP request, following fields are set as well:</p></div><div class=ulist><ul><li><p><code>_http_method</code> - The HTTP method used by the client while calling heimdallâ€™s endpoint.</p></li><li><p><code>_http_path</code> - The used HTTP path.</p></li><li><p><code>_http_user_agent</code> - The agent used by the client. The value is taken from the HTTP "User-Agent" header.</p></li><li><p><code>_http_host</code> - The host part of the URI, the client is using while communicating with Heimdall.</p></li><li><p><code>_http_scheme</code> - The scheme part of the URI, the client is using while communicating with Heimdall.</p></li></ul></div><div class=paragraph><p>If the event has been emitted for a GRPC request, following fields are set:</p></div><div class=ulist><ul><li><p><code>_grpc_method</code> - The full GRPC method used.</p></li></ul></div><div class=paragraph><p>If the request comes from an intermediary, like e.g. an API Gateway and heimdall is configured to trust that "proxy" (see <a href=../../../docs/configuration/services/decision/#_trusted_proxies><code>trusted_proxies</code> configuration</a> of the Decision service, as well as the <a href=../../../docs/configuration/services/proxy/#_trusted_proxies><code>trusted_proxies</code> configuration</a> of the Proxy service), then following fields will be part of the events as well if the corresponding HTTP headers were sent.</p></div><div class=ulist><ul><li><p><code>_http_x_forwarded_proto</code> - The value of the "X-Forwarded-Proto" header.</p></li><li><p><code>_http_x_forwarded_host</code> - The value of the "X-Forwarded-Host" header.</p></li><li><p><code>_http_x_forwarded_uri</code> - The value of the "X-Forwarded-Uri" header.</p></li><li><p><code>_http_x_forwarded_for</code> - The value of the "X-Forwarded-For" header.</p></li><li><p><code>_http_forwarded</code> - The value of the "Forwarded" header.</p></li></ul></div><div class=paragraph><p>Following are the fields, which are set in the transaction finalization event in addition:</p></div><div class=ulist><ul><li><p><code>_body_bytes_sent</code> - The length of the response body.</p></li><li><p><code>_tx_duration_ms</code> - The duration of the transaction in milliseconds. If heimdall is operated in proxy mode, it will also include the time used to communicate with the upstream service.</p></li><li><p><code>_access_granted</code> - Set either to <code>true</code> or <code>false</code>, indicating whether heimdall granted access or not.</p></li><li><p><code>_subject</code> - The subject identifier if the access was granted.</p></li><li><p><code>_error</code> - The information about an error, which e.g. led to the denial of the request.</p></li></ul></div><div class=paragraph><p>If the finalization event has been emitted for an HTTP request, following fields are set as well:</p></div><div class=ulist><ul><li><p><code>_http_status_code</code> - The numeric HTTP response status code</p></li></ul></div><div class=paragraph><p>If the finalization event has been emitted for a GRPC request, following fields are set:</p></div><div class=ulist><ul><li><p><code>_grpc_status_code</code> - The numeric GRPC status code.</p></li></ul></div><div class=paragraph><p>Following are the fields, which are set if tracing is enabled:</p></div><div class=ulist><ul><li><p><code>_trace_id</code> - The trace id as defined by OpenTelemetry.</p></li><li><p><code>_span_id</code> - The span id as defined by OpenTelemetry of the current transaction.</p></li><li><p><code>_parent_id</code> - The span id of the callee, which started the given transaction. Only present if the callee set the corresponding tracing header.</p></li></ul></div><div class=paragraph><p>If you configure heimdall to log in <code>text</code> format, you can expect output as shown below:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=text>2022-08-03T12:40:16+02:00 INF TX started _client_ip=127.0.0.1 _http_host=127.0.0.1:4468 _http_method=GET
 _http_path=/foo _http_scheme=http _http_user_agent=curl/7.74.0 _parent_id=3449bda63ed70206
 _span_id=f57c007257fee0ed _trace_id=00000000000000000a5af97bffe6a8a2 _tx_start=1659523216

....

2022-08-03T12:40:16+02:00 INF TX finished _access_granted=true _body_bytes_sent=0 _client_ip=127.0.0.1
 _http_host=127.0.0.1:4468 _http_method=GET _http_path=/foo _http_scheme=http _http_status_code=202
 _http_user_agent=curl/7.74.0 _subject=anonymous _parent_id=3449bda63ed70206 _span_id=f57c007257fee0ed
 _trace_id=00000000000000000a5af97bffe6a8a2 _tx_duration_ms=0 _tx_start=1659523216</code></pre></div></div><div class=paragraph><p>Otherwise, if you configure it to use <code>gelf</code> format, the output will look as follows:</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=json><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;INFO&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_tx_start&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_client_ip&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_method&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;GET&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_path&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#e6db74>&#34;/foo&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_http_user_agent&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;curl/7.74.0&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;127.0.0.1:4468&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_scheme&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;http&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>6</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;TX started&#34;</span><span style=color:#fff;background-color:#272822>}</span><span style=color:#fff;background-color:#272822>

</span><span style=color:#960050>....</span><span style=color:#fff;background-color:#272822>

</span><span style=color:#fff;background-color:#272822>{</span><span style=color:#fff;background-color:#272822>&#34;_level_name&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;INFO&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;version&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;1.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_tx_start&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_client_ip&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_method&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;GET&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_path&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;/foo&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_http_user_agent&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;curl/7.74.0&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_host&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;127.0.0.1:4468&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_scheme&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;http&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_body_bytes_sent&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>0</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_http_status_code&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>200</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_tx_duration_ms&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>0</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_subject&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;anonymous&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_access_granted&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#66d9ef>true</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;timestamp&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#ae81ff>1659523295</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;level&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#ae81ff>6</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_parent_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;3449bda63ed70206&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;_span_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;f57c007257fee0ed&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822> </span><span style=color:#fff;background-color:#272822>&#34;_trace_id&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;00000000000000000a5af97bffe6a8a2&#34;</span><span style=color:#fff;background-color:#272822>,</span><span style=color:#fff;background-color:#272822>
 </span><span style=color:#fff;background-color:#272822>&#34;short_message&#34;</span><span style=color:#fff;background-color:#272822>:</span><span style=color:#fff;background-color:#272822> </span><span style=color:#e6db74>&#34;TX finished&#34;</span><span style=color:#fff;background-color:#272822>}</span></code></pre></div></div></div></div></div><div class=sect1><h2 id=_tracing_in_heimdall>Tracing in Heimdall</h2><div class=sectionbody><div class=paragraph><p>Heimdall makes use of <a href=https://opentelemetry.io/>OpenTelemetry</a> for distributed tracing to support recording of paths taken by requests and supports all environment variables including the defined values according to <a href=https://opentelemetry.io/docs/reference/specification/sdk-environment-variables/>OpenTelemetry Environment Variables</a> and <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/>OpenTelemetry SDK Configuration</a> specifications. In addition to these environment variables, heimdall defines some additional options, which are described in <a href=../../../docs/configuration/observability/tracing/>Tracing Configuration</a> and can be used to tune the behaviour.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Tracing is enabled by default.</td></tr></tbody></table></div><div class=paragraph><p>On one hand, this chapter serves the purpose of a quick introduction to distributed tracing with heimdall and on the other hand to list the options that go beyond the standard OTEL definitions.</p></div><div class=sect2><h3 id=_tracing_context_propagation>Tracing Context Propagation</h3><div class=paragraph><p>When a request arrives at heimdall, it will create a trace context object based on the received headers, which according to OTEL are the <code>traceparent</code> and <code>tracestate</code> HTTP headers, defined in <a href=https://www.w3.org/TR/trace-context/>W3C Trace Context</a> as well as <code>baggage</code> HTTP header, defined in <a href=https://www.w3.org/TR/baggage/>W3C Baggage</a>. The creation of that context, as well as the transformation of it into new HTTP headers, set by heimdall while communicating with further services is named propagation and the components responsible for the creation of such context object are named propagators.</p></div><div class=paragraph><p>Since not every service in a multi-service system may set or understand the above OTEL specific HTTP headers (as these might still be using tracing vendor specific headers), interoperability can be achieved by configuring the required propagators by making use of the <code>OTEL_PROPAGATORS</code> environment variable. OTEL defines the following values for this variable:</p></div><div class=ulist><ul><li><p><code>tracecontext</code> - <a href=https://www.w3.org/TR/trace-context/>W3C Trace Context</a> propagator. Enabled by default, if <code>OTEL_PROPAGATORS</code> is not set.</p></li><li><p><code>baggage</code> - <a href=https://www.w3.org/TR/baggage/>W3C Baggage</a> propagator. Enabled by default if <code>OTEL_PROPAGATORS</code> is not set.</p></li><li><p><code>b3</code> - <a href=https://github.com/openzipkin/b3-propagation#single-header>Zipkin B3 Single Header</a> propagator.</p></li><li><p><code>b3multi</code> - <a href=https://github.com/openzipkin/b3-propagation#multiple-headers>Zipkin B3 Multiple Header</a> propagator.</p></li><li><p><code>jaeger</code> - <a href=https://www.jaegertracing.io/docs/1.38/client-libraries/#propagation-format>Jaeger Header</a> propagator.</p></li><li><p><code>xray</code> - <a href=https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-tracingheader>AWS X-Ray Header</a> propagator.</p></li><li><p><code>ottrace</code> - <a href="https://github.com/opentracing?q=basic&type=&language=">OT Trace Header</a> propagator.</p></li><li><p><code>none</code> - No automatically configured propagator.</p></li></ul></div><div class=paragraph><p>All of these are supported by heimdall. In addition, following propagators can be configured as well:</p></div><div class=ulist><ul><li><p><code>datadog</code> - <a href=https://www.datadoghq.com/product/apm/>Datadog APM Trace Header</a> propagator.<sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup></p></li></ul></div><div class=paragraph><p>Configured propagators are used for inbound, as well as for outbound traffic.</p></div></div><div class=sect2><h3 id=_span_exporters>Span Exporters</h3><div class=paragraph><p>Span Exporter handle the delivery of spans to external receivers (collectors, or agents). This is the final component in the trace export pipeline and typically provided by the APM vendor, like Jaeger, Zipkin, Instana, etc. Since not every multi-service system may have an up to day telemetry receiver supporting protocols defined by OTEL, interoperability can be achieved by configuring the required exporters by making use of the <code>OTEL_TRACES_EXPORTER</code> environment variable. OTEL defines the following values for this variable<sup class=footnote>[<a id=_footnoteref_2 class=footnote href=#_footnotedef_2 title="View footnote.">2</a>]</sup>:</p></div><div class=ulist><ul><li><p><code>otlp</code> - <a href=https://opentelemetry.io/docs/reference/specification/protocol/otlp/>OTLP</a> exporter. Enabled by default if <code>OTEL_TRACES_EXPORTER</code> is not set.</p></li><li><p><code>zipkin</code> - <a href=https://zipkin.io/zipkin-api/>Zipkin</a> exporter to export spans in Zipkin data model.</p></li><li><p><code>none</code> - No automatically configured exporter for traces.</p></li></ul></div><div class=paragraph><p>All of these are supported by heimdall. In addition, following exporters can be configured as well:</p></div><div class=ulist><ul><li><p><code>instana</code> - <a href=https://www.instana.com/>Instana</a> exporter to export spans in Instana data model.<sup class=footnote>[<a id=_footnoteref_3 class=footnote href=#_footnotedef_3 title="View footnote.">3</a>]</sup></p></li></ul></div></div><div class=sect2><h3 id=_example_configuration>Example Configuration</h3><div class=paragraph><p>The environment variables set below configure heimdall to use Jaeger propagator and to export the spans via OTLP over grpc to the collector available under <code>http://collector:4317</code>.</p></div><div class=listingblock><div class=content><pre class="rouge highlight" style=color:#fff;background-color:#272822><code data-lang=text>OTEL_PROPAGATORS=jaeger
OTEL_TRACES_EXPORTER=otlp
OTEL_EXPORTER_OTLP_TRACES_PROTOCOL=grpc
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://collector:4317</code></pre></div></div><div class=paragraph><p>If your environment supports OpenTelemetry and usage of defaults is ok, most probably, the only required environment variable to be set might be the <code>OTEL_EXPORTER_OTLP_TRACES_ENDPOINT</code>.</p></div></div></div></div><div class=sect1><h2 id=_metrics_in_heimdall>Metrics in Heimdall</h2><div class=sectionbody><div class=paragraph><p>Heimdall makes use of <a href=https://opentelemetry.io/>OpenTelemetry</a> to emit metrics. Depending on the configuration, push or pull based metrics export is supported. As with tracing, the entire configuration happens via environment variables as defined by <a href=https://opentelemetry.io/docs/reference/specification/sdk-environment-variables/>OpenTelemetry Environment Variables</a> and <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/>OpenTelemetry SDK Configuration</a> specifications. In addition to these environment variables, heimdall allows disabling collection and exposure of metrics if required, which is described under <a href=../../../docs/configuration/observability/tracing/>Tracing Configuration</a>.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><i class="fa icon-note" title=Note></i></td><td class=content>Metric exposure is enabled by default.</td></tr></tbody></table></div><div class=paragraph><p>This chapter serves the purpose of a quick introduction to metrics collected and exposed by heimdall.</p></div><div class=sect2><h3 id=_metric_exporters>Metric Exporters</h3><div class=paragraph><p>By default, metrics are pushed to the OTEL collector using the <code>http/protobuf</code> transport protocol. You can change that behavior by making use of either the <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/#otel_exporter_otlp_metrics_protocol><code>OTEL_EXPORTER_OTLP_METRICS_PROTOCOL</code></a>, or the <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/#otel_exporter_otlp_protocol><code>OTEL_EXPORTER_OTLP_PROTOCOL</code></a> environment variable.</p></div><div class=paragraph><p>To let heimdall know where to push the metrics to, either <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/#otel_exporter_otlp_metrics_endpoint><code>OTEL_EXPORTER_OTLP_METRICS_ENDPOINT</code></a>, or <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/#otel_exporter_otlp_endpoint><code>OTEL_EXPORTER_OTLP_ENDPOINT</code></a> must be defined.</p></div><div class=paragraph><p>To let heimdall expose metrics over a pull based service (<a href=https://grafana.com/oss/prometheus/>Prometheus</a> style), the <a href=https://opentelemetry.io/docs/concepts/sdk-configuration/general-sdk-configuration/#otel_metrics_exporter><code>OTEL_METRICS_EXPORTER</code></a> environment variable must be set to <code>"prometheus"</code>. In that case heimdall will expose the <code>127.0.0.1:9464/metrics</code> endpoint which can be queried using the HTTP GET verb. You can change the host and port of that service by making use of the <a href=https://opentelemetry.io/docs/specs/otel/configuration/sdk-environment-variables/#prometheus-exporter><code>OTEL_EXPORTER_PROMETHEUS_HOST</code></a> and <a href=https://opentelemetry.io/docs/specs/otel/configuration/sdk-environment-variables/#prometheus-exporter><code>OTEL_EXPORTER_PROMETHEUS_PORT</code></a> environment variables.</p></div></div><div class=sect2><h3 id=_available_metrics>Available Metrics</h3><div class=ulist><ul><li><p>System metrics according to <a href=https://opentelemetry.io/docs/specs/otel/metrics/semantic_conventions/system-metrics/>OpenTelemetry Semantic Conventions for System Metrics</a>.</p></li><li><p>Process and Go runtime metrics according to <a href=https://opentelemetry.io/docs/specs/otel/metrics/semantic_conventions/process-metrics/>OpenTelemetry Semantic Conventions for OS Process Metrics</a>.</p></li><li><p>Information about the handled requests on each active service, as well as information about requests in progress according to OpenTelemetry <a href=https://opentelemetry.io/docs/specs/otel/metrics/semantic_conventions/http-metrics/>Semantic Conventions for HTTP Metrics</a> and <a href=https://opentelemetry.io/docs/specs/otel/metrics/semantic_conventions/rpc-metrics/>General RPC conventions</a>.</p></li><li><p>Information about the metrics endpoint itself (if enabled), including the number of internal errors encountered while gathering the metrics, number of current inflight and overall scrapes done.</p></li><li><p>Information about expiry for configured certificates.</p></li></ul></div><div class=paragraph><p>All, but custom metrics adhere to the <a href=https://opentelemetry.io/docs/specs/otel/metrics/semantic_conventions/>OpenTelementry semantic conventions</a>. For that reason, only the custom metrics are listed in the table below.</p></div><div class=sect3><h4 id=_metric_certificate_expiry>Metric: <code>certificate.expiry</code></h4><div class=paragraph><p>Number of seconds until a certificate used by a particular service (decision, proxy, management), as well as signer expires. The metric type is UpDownCounter und the unit is s.</p></div><table class="tableblock frame-all grid-all stretch"><col style=width:25%><col style=width:12.5%><col style=width:62.5%><thead><tr><th class="tableblock halign-left valign-top"><strong>Attribute</strong></th><th class="tableblock halign-left valign-top"><strong>Type</strong></th><th class="tableblock halign-left valign-top"><strong>Description</strong></th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>service</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>string</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The service, the certificate is configured for.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>issuer</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>string</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Issuer DN of the certificate.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>serial_nr</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>string</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>The serial number of the certificate.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>subject</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>string</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Subject DN of the certificate.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>dns_names</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>string</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>DNS entries in the SAN extension</p></td></tr></tbody></table></div></div></div></div><div class=sect1><h2 id=_runtime_profiling_in_heimdall>Runtime Profiling in Heimdall</h2><div class=sectionbody><div class=paragraph><p>If enabled, heimdall exposes a <code>/debug/pprof</code> HTTP endpoint on port <code>10251</code> (See also <a href=../../../docs/configuration/observability/profiling/>Runtime Profiling Configuration</a>) on which runtime profiling data in the <code>profile.proto</code> format (also known as <code>pprof</code> format) can be consumed by APM tools, like <a href=https://github.com/google/pprof>Googleâ€™s pprof</a>, <a href=https://grafana.com/oss/phlare/>Grafana Phlare</a>, <a href=https://pyroscope.io/>Pyroscope</a> and many more for visualization purposes. Following information is available:</p></div><div class=ulist><ul><li><p><code>allocs</code> - A sampling of all past memory allocations.</p></li><li><p><code>block</code> - Stack traces that led to blocking on synchronization primitives.</p></li><li><p><code>cmdline</code> - The command line invocation of the current program, with arguments separated by NUL bytes.</p></li><li><p><code>goroutine</code> - Stack traces of all current goroutines.</p></li><li><p><code>heap</code> - A sampling of memory allocations of live objects.</p></li><li><p><code>mutex</code> - Stack traces of holders of contended mutexes.</p></li><li><p><code>profile</code> - Cpu profile. Profiling lasts for duration specified in <code>seconds</code> parameter, or for 30 seconds if not specified</p></li><li><p><code>symbol</code> - Looks up the program counters listed in the request, responding with a table mapping program counters to function names.</p></li><li><p><code>threadcreate</code> - Stack traces that led to the creation of new OS threads.</p></li><li><p><code>trace</code> - Execution trace in binary form. Tracing lasts for duration specified in <code>seconds</code> parameter, or for 1 second if not specified.</p></li></ul></div><div class=paragraph><p>See also the <a href=../../../openapi/#tag/Profiling>API</a> documentation for the documentation of the actual API.</p></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. Datadog supports the OTLP protokoll. For that reason, there is no exporter available.</div><div class=footnote id=_footnotedef_2><a href=#_footnoteref_2>2</a>. jaeger exporter has been marked as deprecated and is not supported anymore</div><div class=footnote id=_footnotedef_3><a href=#_footnoteref_3>3</a>. Instana supports the W3C header used by OTEL. For that reason, there is no propagator available.</div></div></linkable-headline-area></div><p class="text-end fst-italic fs-7">Last updated on <span class=fw-bold>Nov 29, 2023</span></p><div class="d-flex justify-content-between"><a href=../../../docs/operations/cli/><div class="fs-6 mb-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5.0 010 .708L5.707 8l5.647 5.646a.5.5.0 01-.708.708l-6-6a.5.5.0 010-.708l6-6a.5.5.0 01.708.0z"/></svg>CLI</div></a><a class=ms-auto href=../../../docs/operations/security/><div class="fs-6 mb-3">Security<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" class="bi bi-chevron-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.646 1.646a.5.5.0 01.708.0l6 6a.5.5.0 010 .708l-6 6a.5.5.0 01-.708-.708L10.293 8 4.646 2.354a.5.5.0 010-.708z"/></svg></div></a></div></main></div><footer class="footer py-4 py-md-5 px-4 px-md-3"><div class=container><div class=row><div class="col-lg-3 mb-3"><p class=fs-5>Heimdall</p><ul class="list-unstyled small text-muted"><li class=mb-2>2022-2023 Â© Heimdall Project Authors. All rights reserved.</li><li class=mb-2><a href=https://github.com/dadrus/heimdall/blob/master/LICENSE>Apache 2.0 licensed</a></li></ul></div><div class="col-6 col-lg-2 offset-lg-1 mb-3"><h5>Links</h5><ul class=list-unstyled><li class=mb-2><a href=../../../>Home</a></li><li class=mb-2><a href=../../../docs/welcome>Docs</a></li><li class=mb-2><a href=../../../openapi/>API</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Guides</h5><ul class=list-unstyled><li class=mb-2><a href=../../../docs/operations/install/>Install</a></li><li class=mb-2><a href=../../../docs/getting_started/>Getting Started</a></li><li class=mb-2><a href=../../../docs/guides/>Integration Guides</a></li></ul></div><div class="col-6 col-lg-2 mb-2"><h5>Community</h5><ul class=list-unstyled><li class=mb-2><a href=https://github.com/dadrus/heimdall>Github</a></li><li class=mb-2><a href=https://discord.gg/qQgg8xKuyb>Discord</a></li></ul></div></div></div></footer><script src=../../../js/main.js defer></script>
<script src=https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js></script></body></html>