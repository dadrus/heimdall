init:
  terraform init -upgrade

install-ngnix-demo: init
  terraform apply -auto-approve -var ingress_controller="nginx" -var gateway_api_enabled=false -var global_integration_enabled=false

install-ngnix-global-demo: init
  terraform apply -auto-approve -var ingress_controller="nginx" -var gateway_api_enabled=false -var global_integration_enabled=true

install-contour-demo: init
  terraform apply -auto-approve -var ingress_controller="contour" -var gateway_api_enabled=false -var global_integration_enabled=true

install-haproxy-demo: init
  terraform apply -auto-approve -var ingress_controller="haproxy" -var gateway_api_enabled=false -var global_integration_enabled=false

install-haproxy-global-demo: init
  terraform apply -auto-approve -var ingress_controller="haproxy" -var gateway_api_enabled=false -var global_integration_enabled=true

install-emissary-demo: init
  terraform apply -auto-approve -var ingress_controller="emissary" -var gateway_api_enabled=false -var global_integration_enabled=true

install-envoygw-demo: init
  terraform apply -auto-approve -var ingress_controller="envoy-gateway" -var gateway_api_enabled=true -var global_integration_enabled=true

install-traefik-ingress-demo: init
  terraform apply -auto-approve -var ingress_controller="traefik" -var gateway_api_enabled=false -var global_integration_enabled=true

install-traefik-ingress-route-demo: init
  terraform apply -auto-approve -var ingress_controller="traefik" -var gateway_api_enabled=false -var global_integration_enabled=false

install-traefik-gw-demo: init
  terraform apply -auto-approve \
    -var ingress_controller="traefik" \
    -var gateway_api_enabled=true \
    -var global_integration_enabled=true \
    -var observability_stack_enabled=true

# this receipt doesn't work right now
install-istio-ingress-gw-demo: init
  terraform apply -auto-approve \
    -var ingress_controller="istio" \
    -var gateway_api_enabled=false \
    -var global_integration_enabled=false

install-istio-gw-demo: init
  terraform apply -auto-approve \
    -var ingress_controller="istio" \
    -var gateway_api_enabled=true \
    -var global_integration_enabled=false

delete-cluster:
  terraform destroy -auto-approve
